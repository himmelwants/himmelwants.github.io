# 1111 실습

이번 주차에는 JOIN 명령어 복습과 서브쿼리, EXISTS 명령어를 사용해 쿼리를 작성하는 법을 공부했다.

---
# 1. JOIN 복습

    #고객id, 고객명, 도서id, 도서판매금액, 판매일을 출력하라/ Orders, Customer 테이블 조인
    
    select a.custid, b.name, a.bookid, a.saleprice, a.orderdate
    from Orders a join Customer b 
    ON a.custid = b.custid;

이미지


    #고객id, 고객명, 도서id, 도서명, 판매금액, 판매일을 출력하라/Orders, Customer, Book 테이블 조인
    
    select a.custid, b.name, c.bookid, c.bookname, a.saleprice, a.orderdate
    from Orders a, Customer b, Book c
    WHERE a.custid= b.custid and c.bookid = a.bookid;

이미지

    #모든 고객의 구매 내역 (구매 이력이 없는 고객 데이터 포함)을 출력하라/Orders, Customer outer join
    
    #left outer join
    select a.custid, a.name, b.saleprice
    from Customer a left outer join Orders b
    on a.custid = b.custid; 
    
    #right outer join
    select a.custid, a.name, b.saleprice
    from  Orders b right outer join Customer a
    on a.custid = b.custid; 

이미지

    #구매가 일어나지 않은 고객의 정보만 출력하라/Orders, Customer outer join
    
    select a.custid, a.name, b.saleprice
    from Customer a left outer join Orders b
    on a.custid = b.custid
    where b.saleprice is null;

이미지

    #도서id, 도서명, 도서금액을 출력하라/ join X
    
    select bookid, bookname, price
    from Book;
    
가격이 20000원 미만인 도서는 존재하지 않다는 걸 파악할 수 있음.
이미지

## case when - then

    #앞선 문제에서 도서금액이 3만원 이상이면 a, 2만원 이상 3만원 이하이면 b, 2만원 미만 c로 출력하라/ case when then 사용
    
    select bookid, bookname, price, 
           case when price>=30000 then 'a'
                when price>=20000 and price<30000 then 'b'
                else null
                end as level
    from Book;
이미지

> Written with [StackEdit](https://stackedit.io/).


<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE5ODY4MTMzXX0=
-->